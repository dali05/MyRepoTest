package com.lma.apiresponse.storage.conf;

import com.ibm.cloud.objectstorage.services.s3.AmazonS3;
import com.lma.apiresponse.storage.S3StorageProperties;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class S3StorageAutoConfigurationTest {

    @Test
    void shouldCreateBeansSuccessfully() {
        S3StorageProperties props = new S3StorageProperties();
        props.setAccessKey("key");
        props.setSecretKey("secret");
        props.setEndpoint("http://localhost:9000");
        props.setRegion("eu-de");
        props.setBucket("bucket");

        S3StorageAutoConfiguration conf = new S3StorageAutoConfiguration();

        AmazonS3 s3 = conf.s3Client(props);
        assertNotNull(s3);

        assertNotNull(conf.storageService(s3, props));
    }
}
